/* Base theme variables */
:root{
  --indigo-50:#eef2ff;
  --indigo-100:#e0e7ff;
  --indigo-200:#c7d2fe;
  --indigo-300:#a5b4fc;
  --indigo-400:#818cf8;
  --indigo-500:#6366f1;
  --indigo-600:#4f46e5;
  --indigo-700:#4338ca;
  --indigo-800:#3730a3;
  --indigo-900:#312e81;
  --red-500:#ef4444;
  --modal-panel-bg: rgba(255,255,255,0.20); /* было 0.05 → теперь 20% */
}

/* Timeline container */
.timeline-container{
  width:100%;
  max-width:1200px;
  margin:0 auto;
  position:relative;
  padding:2rem 0;
}

/* Horizontal line track */
.timeline-line{
  position:absolute;
  top:50%;
  left:0;
  right:0;
  height:4px;
  background-color:var(--indigo-600);
}

/* Variant lines */
.timeline-line.light{ background-color:var(--indigo-200); }
.timeline-line.block{ background-color:var(--red-500); height:6px; }
.timeline-line.future{ border-top:4px dashed var(--indigo-600); background:none; height:0; }

/* Timeline point */
.timeline-point{
  position:absolute;
  width:16px;
  height:16px;
  border-radius:50%;
  background-color:var(--indigo-600);
  cursor:pointer;
  transform:translate(-50%,-50%);
  border:2px solid white;
  z-index:2;
}
.timeline-point:hover{ transform:translate(-50%,-50%) scale(1.1); }

/* Label above point */
.timeline-label{
  position:absolute;
  white-space:nowrap;
  transform:translate(-50%,-150%);
  font-size:0.85rem;
  font-weight:500;
  color:#333;
}

/* Now marker */
.now-marker{
  position:absolute;
  width:2px;
  top:0;
  bottom:0;
  background:var(--red-500);
  animation:pulse 2s infinite;
  pointer-events:none;
}
@keyframes pulse{
  0%{ opacity:.6; }
  50%{ opacity:1; }
  100%{ opacity:.6; }
}

/* Legend below timeline */
.timeline-legend{
  display:flex;
  gap:1.5rem;
  justify-content:center;
  margin-top:2rem;
  font-size:0.9rem;
  color:#444;
  flex-wrap:wrap;
}
.legend-item{ display:flex; align-items:center; gap:0.5rem; }
.legend-swatch{ display:inline-block; height:4px; width:44px; }
.swatch-light{ background:var(--indigo-200); }
.swatch-main{ background:var(--indigo-600); }
.swatch-block{ background:var(--red-500); height:6px; }
/* исправлено: пунктирная линия в легенде */
.swatch-future{
  width:44px;
  height:0;
  border-top:4px dashed var(--indigo-600);
}

/* Modal unified */
.modal-backdrop{
  position:fixed;
  top:0;left:0;right:0;bottom:0;
  background:rgba(0,0,0,0.5);
  display:none;
  justify-content:center;
  align-items:center;
  z-index:1000;
  backdrop-filter:blur(5px);
}
.modal-backdrop.active{ display:flex; }
.modal-dialog{
  background:var(--modal-panel-bg);
  backdrop-filter:blur(8px);
  padding:1.5rem;
  border-radius:1rem;
  max-width:600px;
  width:90%;
  color:#111;
}
.modal-dialog h2{ font-size:1.25rem; margin-bottom:0.5rem; font-weight:600; }
.modal-dialog p{ margin-bottom:0.75rem; line-height:1.4; }
.modal-dialog .btn{
  background:var(--indigo-600);
  color:white;
  padding:0.4rem 0.9rem;
  border:none;
  border-radius:0.5rem;
  cursor:pointer;
  font-size:0.85rem;
}
.modal-dialog .btn:hover{ background:var(--indigo-700); }
.modal-close{
  position:absolute;
  top:0.75rem; right:0.75rem;
  font-size:1.2rem;
  cursor:pointer;
}

/* Responsive */
@media(max-width:820px){
  .timeline-line{ left:50%; top:0; bottom:0; width:4px; height:auto; }
  .timeline-line.block{ width:6px; }
  .timeline-line.future{ border-left:4px dashed var(--indigo-600); border-top:none; height:auto; width:0; }
  .timeline-point{ left:50%; }
  .timeline-label{ left:calc(50% + 20px); transform:none; top:auto; }
  .now-marker{ width:100%; height:2px; left:0; top:auto; bottom:0; }
}
