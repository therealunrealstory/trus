<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>The Real Unreal Story ‚Äî –ø–æ–º–æ—â—å –ê–¥–∞–º—É</title>
  <meta name="description" content="The Real Unreal Story ‚Äî –ø—Ä–∞–≤–¥–∏–≤–∞—è –∏—Å—Ç–æ—Ä–∏—è —Ö–∏—Ä—É—Ä–≥–∞, –∫–æ—Ç–æ—Ä—ã–π –≤—Å—é –∂–∏–∑–Ω—å —Å–ø–∞—Å–∞–ª –¥—Ä—É–≥–∏—Ö, –∞ —Ç–µ–ø–µ—Ä—å —Å–∞–º –±–æ—Ä–µ—Ç—Å—è –∑–∞ –∂–∏–∑–Ω—å." />
  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <!-- Splide (–∫–∞—Ä—É—Å–µ–ª—å —Å–µ—Ä–¥–µ—Ü) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/css/splide.min.css">
  <script src="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/js/splide.min.js"></script>

  <style>
    body{ background:#000 url('images/bg.png') center/cover fixed no-repeat; }
    #map{ height:360px }
    header{ background:#000; border-radius:1rem; margin-top:1rem; padding:1rem; color:#fff; }
    section, footer{ background:rgba(0,0,0,0.2); border-radius:1rem; margin-top:1rem; padding:1rem; color:#fff; }
    .icon-btn{ display:inline-flex; align-items:center; gap:8px }
    .icon-btn svg{ width:18px; height:18px }
    .tile{ position:relative; overflow:hidden; border-radius:1rem; height:180px; background-size:cover; background-position:center; cursor:pointer; border:1px solid rgba(255,255,255,.08) }
    .tile::after{ content:""; position:absolute; inset:0; background:linear-gradient(180deg,transparent,rgba(0,0,0,.6)) }
    .tile>span{ position:absolute; left:1rem; bottom:1rem; z-index:1; background:rgba(0,0,0,.55); padding:.4rem .7rem; border-radius:.8rem }
    .video-wrap{ position:relative; width:100%; padding-top:56.25%; border-radius:1rem; overflow:hidden; border:1px solid rgba(255,255,255,.08) }
    .video-wrap iframe{ position:absolute; inset:0; width:100%; height:100% }
    .modal-backdrop{ display:none; z-index:9999; } .modal-backdrop.show{ display:block }
    /* –ø—É–ª—å—Å–∏—Ä—É—é—â–∞—è –∫–Ω–æ–ø–∫–∞ */
    @keyframes pulse {
      0% { transform:scale(1); box-shadow:0 0 0 0 rgba(99,102,241,.6); }
      70%{ transform:scale(1.03); box-shadow:0 0 0 12px rgba(99,102,241,0); }
      100%{ transform:scale(1); box-shadow:0 0 0 0 rgba(99,102,241,0); }
    }
    .pulse{ animation:pulse 2s infinite; }
  </style>
</head>
<body class="text-white">
  <!-- HEADER -->
  <header class="max-w-5xl mx-auto px-4 py-6">
    <div class="text-3xl sm:text-4xl font-bold tracking-tight leading-tight">The Real Unreal Story</div>
    <div class="mt-4 flex flex-wrap gap-2 items-center justify-end">
      <select id="lang" class="px-3 py-2 rounded bg-gray-800 text-white text-sm">
        <option value="EN">EN</option><option value="ES">ES</option><option value="FR">FR</option>
        <option value="PT">PT</option><option value="DE">DE</option><option value="IT">IT</option>
        <option value="RU" selected>RU</option><option value="CN">CN</option><option value="AR">AR</option>
      </select>
      <button id="audioBtn" class="px-4 py-2 rounded-xl bg-indigo-600 text-white text-sm pulse">–ò—Å—Ç–æ—Ä–∏—è –≤ –º—É–∑—ã–∫–µ</button>
    </div>
  </header>

  <!-- –°–æ—Ü—Å–µ—Ç–∏ -->
  <section class="max-w-5xl mx-auto px-4">
    <div class="flex items-center gap-3 flex-wrap">
      <a class="icon-btn px-4 py-2 rounded-xl border border-gray-700 bg-gray-900/40 shadow-sm" href="https://instagram.com/theRealUnrealStory" target="_blank" rel="noreferrer">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5zm0 2a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3H7zm5 3a5 5 0 1 1 0 10 5 5 0 0 1 0-10zm0 2.2A2.8 2.8 0 1 0 12 15.8 2.8 2.8 0 0 0 12 9.2zm4.8-2.5a1.1 1.1 0 1 1 0 2.2 1.1 1.1 0 0 1 0-2.2z"/></svg>
        Instagram
      </a>
      <a class="icon-btn px-4 py-2 rounded-xl border border-gray-700 bg-gray-900/40 shadow-sm" href="https://t.me/theRealUnrealStory" target="_blank" rel="noreferrer">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M9.96 15.47l-.4 5.63c.57 0 .81-.24 1.1-.53l2.64-2.53 5.47 4c1.01.56 1.73.27 2-.93l3.62-16.97c.32-1.5-.54-2.08-1.52-1.72L1.2 9.65c-1.46.57-1.44 1.39-.25 1.76l5.54 1.73 12.85-8.11c.6-.39 1.15-.17.7.22"/></svg>
        Telegram
      </a>
      <a class="icon-btn px-4 py-2 rounded-xl border border-gray-700 bg-gray-900/40 shadow-sm" href="https://www.youtube.com/@theRealUnrealStory" target="_blank" rel="noreferrer">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M23.5 6.2a3 3 0 0 0-2.1-2.1C19.5 3.5 12 3.5 12 3.5s-7.5 0-9.4.6A3 3 0 0 0 .5 6.2 31 31 0 0 0 0 12a31 31 0 0 0 .6 5.8 3 3 0 0 0 2.1 2.1c1.9.6 9.3.6 9.3.6s7.5 0 9.4-.6a3 3 0 0 0 2.1-2.1A31 31 0 0 0 24 12a31 31 0 0 0-.6-5.8zM9.6 15.5v-7l6.2 3.5-6.2 3.5z"/></svg>
        YouTube
      </a>
      <a class="icon-btn px-4 py-2 rounded-xl border border-gray-700 bg-gray-900/40 shadow-sm" href="https://open.spotify.com" target="_blank" rel="noreferrer">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 1.5a10.5 10.5 0 1 0 0 21 10.5 10.5 0 0 0 0-21zm4.84 15.2c-.19.3-.6.39-.9.2-2.44-1.5-5.52-1.84-9.13-1-.35.08-.7-.14-.78-.5-.08-.35.14-.7.5-.78 3.93-.9 7.34-.51 10.02 1.15.3.18.4.6.2.92zm1.28-2.88c-.24.38-.75.5-1.13.26-2.8-1.72-7.08-2.23-10.4-1.2-.43.13-.88-.11-1-.54-.13-.43.1-.88.54-1 3.76-1.12 8.45-.54 11.67 1.4.4.24.52.76.3 1.08zm.1-3.1c-3.23-1.92-8.6-2.1-11.69-1.14-.5.15-1.04-.14-1.2-.66-.15-.5.14-1.04.66-1.2 3.57-1.1 9.46-.86 13.2 1.37.47.28.63.9.35 1.36-.28.48-.9.63-1.32.27z"/></svg>
        Spotify
      </a>
    </div>
  </section>

  <main class="max-w-5xl mx-auto px-4">
    <!-- HERO (—Ç–µ–∫—Å—Ç—ã ‚Äî —Å—Ç—Ä–æ–≥–æ –∫–∞–∫ —Ç—ã –ø—Ä–æ—Å–∏–ª) -->
    <section id="hero">
      <h1 class="text-3xl md:text-5xl font-semibold leading-tight">
        The Real Unreal Story ‚Äî –ø–æ–º–æ—â—å –ê–¥–∞–º—É<span class="align-super text-green-400 text-xl">*</span>
      </h1>
      <p class="mt-4">
        –ü—Ä–∞–≤–¥–∏–≤–∞—è –∏—Å—Ç–æ—Ä–∏—è —Ö–∏—Ä—É—Ä–≥–∞, –∫–æ—Ç–æ—Ä—ã–π –≤—Å—é –∂–∏–∑–Ω—å —Å–ø–∞—Å–∞–ª –¥—Ä—É–≥–∏—Ö, –∞ —Ç–µ–ø–µ—Ä—å —Å–∞–º –±–æ—Ä–µ—Ç—Å—è –∑–∞ –∂–∏–∑–Ω—å.
        –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å: –ø–æ–¥–¥–µ—Ä–∂–∏—Ç–µ –¥–µ–Ω—å–≥–∞–º–∏, –≤—Ä–µ–º–µ–Ω–µ–º, –¥–µ–ª–æ–º –∏–ª–∏ —Å–ª–æ–≤–æ–º.
      </p>
      <p class="mt-2 text-xs text-gray-300">
        * ¬´–ê–¥–∞–º¬ª ‚Äî —ç—Ç–æ –ø—Å–µ–≤–¥–æ–Ω–∏–º —Ä–µ–∞–ª—å–Ω–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞. –ò–º—è –∏–∑–º–µ–Ω–µ–Ω–æ –¥–ª—è –∑–∞—â–∏—Ç—ã –ª–∏—á–Ω–æ–π –∂–∏–∑–Ω–∏.
      </p>
      <div class="mt-5 flex flex-wrap items-center gap-3">
        <a id="donateHero" target="_blank" class="px-4 py-2 rounded-xl bg-green-500 hover:bg-green-600 text-sm font-medium">–ü–æ–∂–µ—Ä—Ç–≤–æ–≤–∞—Ç—å</a>
        <button id="shareBtn" class="px-4 py-2 rounded-xl bg-gray-200 text-black text-sm hover:opacity-90">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è</button>
      </div>
    </section>

    <!-- 3 –¢–ê–ô–õ–ê -->
    <section>
      <div class="grid md:grid-cols-3 gap-4">
        <div id="tile1" class="tile" style="background-image:url('images/1.png')"><span>–Ø ‚Äî –ù–∏–∫–æ</span></div>
        <div id="tile2" class="tile" style="background-image:url('images/2.png')"><span>–û–± –ê–¥–∞–º–µ</span></div>
        <div id="tile3" class="tile" style="background-image:url('images/3.png')"><span>–î—Ä—É–≥–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ –∏—Å—Ç–æ—Ä–∏–∏</span></div>
      </div>
    </section>

    <!-- –ú–ò–ù–ò-–ü–õ–ï–ï–† –ê–£–î–ò–û-–ê–ù–û–ù–°–ê -->
    <section>
      <h2 class="text-xl font-semibold mb-4">–ê–Ω–æ–Ω—Å –Ω–∞—à–µ–π –∏—Å—Ç–æ—Ä–∏–∏</h2>
      <div class="rounded-2xl border border-gray-700 p-4 flex items-center gap-3" style="background:rgba(0,0,0,0.35)">
        <button id="announceBtn" class="px-4 py-2 rounded-xl bg-indigo-600 hover:bg-indigo-500 text-white text-sm pulse">‚ñ∂Ô∏é –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏</button>
        <div class="text-sm text-gray-200">–ö–æ—Ä–æ—Ç–∫–∏–π –∞—É–¥–∏–æ-–∞–Ω–æ–Ω—Å</div>
        <div id="announceStatus" class="ml-auto text-xs text-gray-300"></div>
      </div>
      <audio id="announceAudio" preload="auto"></audio>
    </section>

    <!-- –í–ò–î–ï–û -->
    <section>
      <h2 class="text-xl font-semibold mb-4">–í–∏–¥–µ–æ-–∞–Ω–æ–Ω—Å</h2>
      <div class="video-wrap">
        <iframe src="https://www.youtube.com/embed/9bWXMziCmXk" title="YouTube video" frameborder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                allowfullscreen></iframe>
      </div>
    </section>

    <!-- –ü–û–î–î–ï–†–ñ–ê–¢–¨ –°–ï–ô–ß–ê–° (–ø–µ—Ä–µ–¥ –Ω–æ–≤–æ—Å—Ç—è–º–∏) -->
    <section>
      <h2 class="text-xl font-semibold mb-4">–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å —Å–µ–π—á–∞—Å</h2>
      <div class="grid md:grid-cols-2 gap-4">
        <!-- –î–æ–Ω–∞—Ç—ã -->
        <div class="p-5 rounded-2xl border border-gray-700" style="background:rgba(0,0,0,0.35)">
          <div class="text-2xl mb-2">üíö</div>
          <div class="font-medium mb-2">–ü–æ–∂–µ—Ä—Ç–≤–æ–≤–∞—Ç—å —Å—Ä–µ–¥—Å—Ç–≤–∞</div>
          <div class="flex flex-wrap gap-2">
            <a class="px-3 py-2 rounded-xl bg-green-600 text-white text-sm" target="_blank" href="https://www.gofundme.com/f/your-campaign-slug/donate?amount=5">$5</a>
            <a class="px-3 py-2 rounded-xl bg-green-600 text-white text-sm" target="_blank" href="https://www.gofundme.com/f/your-campaign-slug/donate?amount=10">$10</a>
            <a class="px-3 py-2 rounded-xl bg-green-600 text-white text-sm" target="_blank" href="https://www.gofundme.com/f/your-campaign-slug/donate?amount=25">$25</a>
            <a class="px-3 py-2 rounded-xl bg-green-600 text-white text-sm" target="_blank" href="https://www.gofundme.com/f/your-campaign-slug/donate?amount=50">$50</a>
            <a class="px-3 py-2 rounded-xl bg-green-600 text-white text-sm" target="_blank" href="https://www.gofundme.com/f/your-campaign-slug/donate?amount=100">$100</a>
            <a class="px-3 py-2 rounded-xl bg-green-600 text-white text-sm" target="_blank" href="https://www.gofundme.com/f/your-campaign-slug/donate?amount=250">$250</a>
            <a class="px-3 py-2 rounded-xl bg-green-600 text-white text-sm" target="_blank" href="https://www.gofundme.com/f/your-campaign-slug/donate?amount=500">$500</a>
          </div>
        </div>
        <!-- –§–∏–∑–∏—á–µ—Å–∫–∞—è –ø–æ–º–æ—â—å -->
        <div class="p-5 rounded-2xl border border-gray-700" style="background:rgba(0,0,0,0.35)">
          <div class="text-2xl mb-2">üë•</div>
          <div class="font-medium mb-2">–§–∏–∑–∏—á–µ—Å–∫–∞—è –ø–æ–º–æ—â—å</div>
          <button id="wantHelp" class="text-sm underline">–Ø —Ö–æ—á—É –ø–æ–º–æ—á—å</button>
        </div>
      </div>
    </section>

    <!-- –ù–û–í–û–°–¢–ò -->
    <section>
      <h2 class="text-xl font-semibold mb-4">–ù–æ–≤–æ—Å—Ç–∏</h2>
      <div id="tgFeed" class="rounded-2xl border border-gray-700 p-4" style="background:rgba(0,0,0,0.35); max-height:560px; overflow-y:auto;">
        <div class="text-sm text-gray-300">–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤–æ—Å—Ç–µ–π‚Ä¶</div>
      </div>
      <div class="mt-4">
        <a href="https://t.me/theRealUnrealStory" target="_blank" rel="noreferrer" class="px-4 py-2 rounded-xl bg-sky-600 text-white text-sm hover:bg-sky-700">
          –°–ª–µ–¥–∏—Ç–µ –∑–∞ –Ω–∞—à–µ–π –∏—Å—Ç–æ—Ä–∏–µ–π –≤ Telegram
        </a>
      </div>
    </section>

    <!-- –í–û–í–õ–ï–ß–Å–ù–ù–û–°–¢–¨ -->
    <section>
      <h2 class="text-xl font-semibold mb-4">–í–∞—à–∞ –≤–æ–≤–ª–µ—á—ë–Ω–Ω–æ—Å—Ç—å</h2>
      <p class="text-sm text-gray-200 mb-3">–û—Ç–º–µ—Ç—å—Ç–µ, —á—Ç–æ –≤—ã —É–∂–µ —Å–¥–µ–ª–∞–ª–∏ ‚Äî —ç—Ç–æ —Ç–æ–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ ‚ù§Ô∏è</p>
      <div id="engageWrap" class="grid sm:grid-cols-2 md:grid-cols-3 gap-3">
        <button class="eng-btn px-4 py-3 rounded-xl border border-gray-700 bg-gray-800/60 text-left">–û–∑–Ω–∞–∫–æ–º–∏–ª—Å—è —Å –∫—Ä–∞—Ç–∫–æ–π –≤–µ—Ä—Å–∏–µ–π –∏—Å—Ç–æ—Ä–∏–∏</button>
        <button class="eng-btn px-4 py-3 rounded-xl border border-gray-700 bg-gray-800/60 text-left">–ü—Ä–æ—á–∏—Ç–∞–ª –ø–æ–ª–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é</button>
        <button class="eng-btn px-4 py-3 rounded-xl border border-gray-700 bg-gray-800/60 text-left">–ü–æ—Å–ª—É—à–∞–ª —Ç—Ä–µ–∫–∏ –æ –Ω–∞—à–µ–π –∏—Å—Ç–æ—Ä–∏–∏</button>
        <button class="eng-btn px-4 py-3 rounded-xl border border-gray-700 bg-gray-800/60 text-left">–ü–æ–¥–ø–∏—Å–∞–ª—Å—è –Ω–∞ –∫–∞–Ω–∞–ª –≤ Telegram</button>
        <button class="eng-btn px-4 py-3 rounded-xl border border-gray-700 bg-gray-800/60 text-left">–ü–æ–¥–ø–∏—Å–∞–ª—Å—è –Ω–∞ Instagram</button>
      </div>
      <p class="mt-2 text-xs text-gray-300">–°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ.</p>
    </section>

    <!-- –ö–ê–†–¢–ê -->
    <section>
      <h2 class="text-xl font-semibold mb-4">üåç –ö–∞—Ä—Ç–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏</h2>
      <div id="map" class="rounded-2xl shadow-sm border" style="background:#0b0b0b"></div>
      <p class="text-xs text-gray-300 mt-2">–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∫–ª–∏–∫–Ω–∏—Ç–µ –ø–æ –∫–∞—Ä—Ç–µ, —á—Ç–æ–±—ã —É–∫–∞–∑–∞—Ç—å —Ç–æ—á–Ω–æ–µ –º–µ—Å—Ç–æ –≤–∞—à–µ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏.</p>
      <div class="mt-4 grid md:grid-cols-3 gap-3">
        <input id="name" class="px-3 py-2 rounded-xl border bg-gray-800/70 text-white" placeholder="–ò–º—è" />
        <input id="msg" class="px-3 py-2 rounded-2xl border bg-gray-800/70 text-white md:col-span-2" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ (–¥–æ 140 —Å–∏–º–≤–æ–ª–æ–≤)" maxlength="140" />
      </div>
      <div class="grid md:grid-cols-3 gap-3 mt-2">
        <button id="addMark" class="px-3 py-2 rounded-xl bg-green-600 text-white text-sm col-span-1">–î–æ–±–∞–≤–∏—Ç—å</button>
        <div class="col-span-2 text-xs text-gray-300 flex items-center">–î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –±–∞–∑–µ</div>
      </div>
      <div class="mt-2 text-sm text-gray-300">–í—Å–µ–≥–æ –æ—Ç–º–µ—Ç–æ–∫: <span id="marksCount">0</span></div>
    </section>

    <!-- –°–ï–†–î–¶–ê -->
    <section id="contact">
      <div class="rounded-3xl p-6 shadow-sm border border-gray-700" style="background:rgba(0,0,0,0.35)">
        <div class="text-lg font-semibold mb-3">–°–µ—Ä–¥—Ü–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏</div>
        <div class="grid grid-cols-1 md:grid-cols-[1fr_auto] gap-2">
          <input id="heartName" class="px-3 py-2 rounded-xl border bg-gray-800/70 text-white text-sm" placeholder="–ò–º—è" />
          <button id="addHeart" class="px-4 py-2 rounded-xl bg-pink-600 text-white text-sm">–û—Å—Ç–∞–≤–∏—Ç—å —Å–µ—Ä–¥—Ü–µ</button>
        </div>
        <div id="heartsSplide" class="splide mt-6" aria-label="–°–µ—Ä–¥—Ü–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏">
          <div class="splide__track"><ul id="heartsSlides" class="splide__list"></ul></div>
        </div>
      </div>
    </section>
  </main>

  <footer class="max-w-5xl mx-auto px-4 text-center text-sm text-gray-300">
    –°–ø–∞—Å–∏–±–æ –∑–∞ –ª—é–±—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É ‚Äî –¥–∞–∂–µ —Ä–µ–ø–æ—Å—Ç –º–µ–Ω—è–µ—Ç —Å—É–¥—å–±—É.
  </footer>

  <!-- –ê—É–¥–∏–æ –≤ —à–∞–ø–∫–µ -->
  <audio id="bgAudio" preload="auto"></audio>

  <!-- –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –º–æ–¥–∞–ª–∫–∞ -->
  <div id="modalBackdrop" class="modal-backdrop fixed inset-0 bg-black/60">
    <div class="min-h-full flex items-center justify-center p-4">
      <div class="bg-gray-900 text-white rounded-2xl shadow-xl border border-gray-700 max-w-xl w-full p-6 relative">
        <button id="modalClose" class="absolute right-3 top-3 text-gray-400 hover:text-white" aria-label="–ó–∞–∫—Ä—ã—Ç—å">‚úï</button>
        <h3 id="modalTitle" class="text-lg font-semibold mb-3"></h3>
        <div id="modalBody" class="text-sm text-gray-200 leading-relaxed"></div>
        <div class="mt-5 text-right"><button id="modalOk" class="px-4 py-2 rounded-xl bg-gray-700 hover:bg-gray-600">–û–∫</button></div>
      </div>
    </div>
  </div>

  <script>
    const donateURL = "https://www.gofundme.com/f/your-campaign-slug";
    document.getElementById('donateHero').href = donateURL;

    // Share
    document.getElementById('shareBtn').addEventListener('click', async () => {
      try {
        const url = location.href;
        if (navigator.share) await navigator.share({ title: 'The Real Unreal Story', url });
        else { await navigator.clipboard.writeText(url); alert('–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞'); }
      } catch {}
    });

    /* ====== ¬´–ò—Å—Ç–æ—Ä–∏—è –≤ –º—É–∑—ã–∫–µ¬ª + —è–∑—ã–∫–∏ ====== */
    const audio = document.getElementById('bgAudio');
    const audioBtn = document.getElementById('audioBtn');
    const langSelect = document.getElementById('lang');
    const audioByLang = {
      EN:"audio/ORUS-EN.mp3", ES:"audio/ORUS-ES.mp3", FR:"audio/ORUS-FR.mp3",
      PT:"audio/ORUS-PT.mp3", DE:"audio/ORUS-DE.mp3", IT:"audio/ORUS-IT.mp3",
      RU:"audio/ORUS-RU.mp3", CN:"audio/ORUS-CN.mp3", AR:"audio/ORUS-AR.mp3"
    };
    function setAudioForLang(l,autoplay=false){
      const src=audioByLang[l]||audioByLang.EN;
      if(audio.src.endsWith(src)){ if(autoplay&&audio.paused) audio.play().catch(()=>{}); return; }
      audio.pause(); audio.src=src; if(autoplay) audio.play().catch(()=>{});
    }
    const savedLang = localStorage.getItem('site_lang') || 'RU';
    langSelect.value = savedLang;
    setAudioForLang(savedLang);

    audioBtn.addEventListener('click',async()=>{
      if(audio.paused){ setAudioForLang(langSelect.value); try{ await audio.play(); audioBtn.textContent='–ü–∞—É–∑–∞'; }catch{} }
      else{ audio.pause(); audioBtn.textContent='–ò—Å—Ç–æ—Ä–∏—è –≤ –º—É–∑—ã–∫–µ'; }
    });

    /* ====== –ú–æ–¥–∞–ª–∫–∏ (—Ç–∞–π–ª—ã + —Ñ–∏–∑–∏—á–µ—Å–∫–∞—è –ø–æ–º–æ—â—å) ====== */
    const modal=document.getElementById('modalBackdrop');
    const mTitle=document.getElementById('modalTitle');
    const mBody=document.getElementById('modalBody');
    const openModal=(title,html)=>{ mTitle.textContent=title; mBody.innerHTML=html; modal.classList.add('show'); };
    const closeModal=()=>modal.classList.remove('show');
    document.getElementById('modalClose').onclick=closeModal; document.getElementById('modalOk').onclick=closeModal;
    modal.addEventListener('click',e=>{ if(e.target===modal) closeModal(); });

    document.getElementById('tile1').onclick=()=>openModal('–Ø ‚Äî –ù–∏–∫–æ', `
      –ú–µ–Ω—è –∑–æ–≤—É—Ç –ù–∏–∫–æ, –∏ —è –¥—Ä—É–≥ –ê–¥–∞–º–∞. –Ø —Å—Ç–∞–ª –Ω–µ–≤–æ–ª—å–Ω—ã–º —É—á–∞—Å—Ç–Ω–∏–∫–æ–º —ç—Ç–æ–π –∏—Å—Ç–æ—Ä–∏–∏, –∫–æ—Ç–æ—Ä—É—é –Ω–∞–∑–≤–∞–ª ¬´—Ä–µ–∞–ª—å–Ω–æ-–Ω–µ—Ä–µ–∞–ª—å–Ω–∞—è¬ª.
      –°–µ–π—á–∞—Å —è –æ–±—Ä–∞—Ç–∏–ª—Å—è –∫ —à–∏—Ä–æ–∫–æ–π –∞—É–¥–∏—Ç–æ—Ä–∏–∏ –∑–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π ‚Äî —Å–∞–º —è –±–æ–ª—å—à–µ –Ω–µ —Å–ø—Ä–∞–≤–ª—è—é—Å—å.
      –ü–æ—ç—Ç–æ–º—É —è —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞—é –Ω–∞—à—É –∏—Å—Ç–æ—Ä–∏—é –±–µ–∑ –≤—ã–º—ã—Å–ª–∞ –∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –∑–∞–ø—É—Å–∫–∞—é —Å–±–æ—Ä —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ GoFundMe.
    `);
    document.getElementById('tile2').onclick=()=>openModal('–û–± –ê–¥–∞–º–µ', `
      –ê–¥–∞–º ‚Äî –≤–µ–ª–∏–∫–æ–ª–µ–ø–Ω—ã–π —á–µ–ª–æ–≤–µ–∫ –∏ —Ö–∏—Ä—É—Ä–≥ —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ –º–µ—Ç–æ–¥–∏–∫–∞–º–∏, –±–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å. –° 2019 –≥–æ–¥–∞ –æ–Ω –Ω–µ —Ä–∞–∑ —Å—Ç–∞–ª–∫–∏–≤–∞–ª—Å—è —Å –æ–Ω–∫–æ–ª–æ–≥–∏–µ–π –∫—Ä–æ–≤–∏.
      –í –∏—é–ª–µ 2025 ‚Äî –Ω–æ–≤—ã–π —Ç—è–∂—ë–ª—ã–π –≤–∏—Ç–æ–∫: –¥—Ä—É–≥–∞—è —Ñ–æ—Ä–º–∞ –ª–µ–π–∫–µ–º–∏–∏. –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ ‚Äî –ª–∏—á–Ω—ã–µ –ø–æ—Ç—Ä—è—Å–µ–Ω–∏—è –∏ —É—Ç—Ä–∞—Ç—ã.
    `);
    document.getElementById('tile3').onclick=()=>openModal('–î—Ä—É–≥–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ –∏—Å—Ç–æ—Ä–∏–∏', `
      –ò—Å—Ç–æ—Ä–∏—è –ê–¥–∞–º–∞ –ø–æ–ª–Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ—Å—Ç–µ–π. –ë—ã–ª–∏ –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω—ã–µ –ø–æ–º–æ—â–Ω–∏–∫–∏ ‚Äî –±–µ–∑ –Ω–∏—Ö –æ–Ω –±—ã –Ω–µ –¥–æ–∂–∏–ª –¥–æ —Å–µ–≥–æ–¥–Ω—è.
      –ë—ã–ª–∏ –∏ —Ç–µ, –∫—Ç–æ —Å–æ–∑–Ω–∞—Ç–µ–ª—å–Ω–æ –≤—Ä–µ–¥–∏–ª. –ò –±—ã–ª–∏ –ª—é–¥–∏, –∫–æ—Ç–æ—Ä—ã—Ö –±—É–¥—Ç–æ —Å–∞–º–∞ –≤—Å–µ–ª–µ–Ω–Ω–∞—è –ø—Ä–∏–≤–æ–¥–∏–ª–∞ –≤ –Ω—É–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç.
    `);
    document.getElementById('wantHelp').onclick=()=>openModal('–§–∏–∑–∏—á–µ—Å–∫–∞—è –ø–æ–º–æ—â—å', `
      –ï—Å–ª–∏ –≤—ã –≥–æ—Ç–æ–≤—ã –ø–æ–º–æ—á—å ‚Äî –±—É–¥—å —Ç–æ —é—Ä–∏–¥–∏—á–µ—Å–∫–∞—è, –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è –∏–ª–∏ —Ñ–∏–∑–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞
      (–º–µ–¥—Å—ë—Å—Ç—Ä—ã, —Å–∏–¥–µ–ª–∫–∏), –∏–ª–∏ –µ—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –ª–∏—á–Ω—É—é –≤—Å—Ç—Ä–µ—á—É ‚Äî –ø–æ–∂–∞–ª—É–π—Å—Ç–∞,
      –Ω–∞–ø–∏—à–∏—Ç–µ –Ω–∞: <a href="mailto:theRealUnrealStory@gmail.com" class="underline">theRealUnrealStory@gmail.com</a>.<br><br>
      –ò—Å–∫—Ä–µ–Ω–Ω–µ –±–ª–∞–≥–æ–¥–∞—Ä–Ω—ã –∫–∞–∂–¥–æ–º—É, –∫—Ç–æ –æ—Ç–∫–ª–∏–∫–Ω–µ—Ç—Å—è.
    `);

    /* ====== –í–æ–≤–ª–µ—á—ë–Ω–Ω–æ—Å—Ç—å ====== */
    const engageBtns=[...document.querySelectorAll('.eng-btn')];
    const ENG_KEY='engagement_v1';
    const loadEng=()=>{ try{return JSON.parse(localStorage.getItem(ENG_KEY)||'[]');}catch{return []} };
    const saveEng=a=>{ try{localStorage.setItem(ENG_KEY,JSON.stringify(a));}catch{} };
    function applyEng(){ const on=loadEng(); engageBtns.forEach((b,i)=>{const s=on.includes(i); b.classList.toggle('bg-green-700',s); b.classList.toggle('border-green-400',s);}); }
    engageBtns.forEach((b,i)=>b.addEventListener('click',()=>{const on=loadEng(); const p=on.indexOf(i); if(p>=0) on.splice(p,1); else on.push(i); saveEng(on); applyEng();}));
    applyEng();

    /* ====== Telegram feed ====== */
    async function renderTgFeed(){
      try{
        const res=await fetch('/.netlify/functions/news?limit=30',{cache:'no-store'});
        if(!res.ok) throw new Error('news API '+res.status);
        const arr=await res.json(), box=document.getElementById('tgFeed');
        if(!Array.isArray(arr)||!arr.length){ box.innerHTML='<div class="text-sm text-gray-300">–ü–æ–∫–∞ –Ω–µ—Ç –ø–æ—Å—Ç–æ–≤.</div>'; return; }
        box.innerHTML=arr.map(p=>{
          const dt=p.date?new Date(p.date):null, time=dt?dt.toLocaleString():'';
          const link=p.link?`<a href="${p.link}" target="_blank" class="underline text-sky-400">–û—Ç–∫—Ä—ã—Ç—å –≤ Telegram</a>`:'';
          const text=(p.text||'').replace(/\n/g,'<br>');
          return `<article class="mb-4 p-3 rounded-xl bg-gray-900/50 border border-gray-700">
                    <div class="text-xs text-gray-300 mb-2">${time}${link?` ¬∑ ${link}`:''}</div>
                    <div class="text-sm leading-relaxed">${text}</div>
                  </article>`;
        }).join('');
      }catch(e){
        console.error(e); document.getElementById('tgFeed').innerHTML='<div class="text-sm text-red-400">–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–≤–æ—Å—Ç–∏.</div>';
      }
    }
    renderTgFeed();

    /* ====== –ö–∞—Ä—Ç–∞ ====== */
    const map=L.map('map').setView([20,0],2);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{attribution:'&copy; OpenStreetMap'}).addTo(map);
    const layer=L.layerGroup().addTo(map);
    if(navigator.geolocation){
      navigator.geolocation.getCurrentPosition(pos=>{
        const {latitude,longitude}=pos.coords; map.setView([latitude,longitude],6);
        L.marker([latitude,longitude]).addTo(map).bindPopup('–í—ã –∑–¥–µ—Å—å').openPopup();
      },()=>{});
    }
    let selectedLatLng=null, previewMarker=null;
    map.on('click', e=>{
      selectedLatLng=e.latlng; if(previewMarker) previewMarker.remove();
      previewMarker=L.marker([selectedLatLng.lat,selectedLatLng.lng],{draggable:true}).addTo(map).bindPopup('–í—ã–±—Ä–∞–Ω–Ω–∞—è —Ç–æ—á–∫–∞ (–º–æ–∂–Ω–æ –ø–µ—Ä–µ—Ç–∞—â–∏—Ç—å)').openPopup();
      previewMarker.on('dragend',()=>{selectedLatLng=previewMarker.getLatLng();});
    });
    function setMarksCount(n){ const el=document.getElementById('marksCount'); if(el) el.textContent=Number.isFinite(n)?String(n):'0'; }
    async function renderMarks(){
      try{
        layer.clearLayers();
        const r=await fetch('/.netlify/functions/marks',{cache:'no-store'}); if(!r.ok) throw new Error(r.status);
        const data=await r.json(), arr=Array.isArray(data)?data:[];
        setMarksCount(arr.length);
        arr.forEach(m=>{
          const lat=Number(m.lat), lon=Number(m.lon); if(!Number.isFinite(lat)||!Number.isFinite(lon)) return;
          L.circleMarker([lat,lon],{radius:4,color:'lime'}).bindPopup(`<b>${m.name||'Anon'}</b><br>${m.message||''}`).addTo(layer);
        });
      }catch(e){ console.error(e); setMarksCount(0); }
    }
    renderMarks();
    document.getElementById('addMark').addEventListener('click', async ()=>{
      const name=document.getElementById('name').value.trim();
      const message=document.getElementById('msg').value.trim();
      if(!message) return alert('–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ');
      if(!selectedLatLng) return alert('–°–Ω–∞—á–∞–ª–∞ –∫–ª–∏–∫–Ω–∏—Ç–µ –ø–æ –∫–∞—Ä—Ç–µ!');
      const {lat,lng}=selectedLatLng;
      const resp=await fetch('/.netlify/functions/marks',{method:'POST',headers:{'content-type':'application/json'},body:JSON.stringify({name,message,lat,lon:lng})});
      if(!resp.ok){ const t=await resp.text().catch(()=>'-'); alert('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è: '+t); return; }
      document.getElementById('msg').value=''; selectedLatLng=null; if(previewMarker){previewMarker.remove(); previewMarker=null;} renderMarks();
    });

    /* ====== Hearts + Splide (18/—Å–ª–∞–π–¥) ====== */
    let splide;
    function chunk(a,s){const out=[];for(let i=0;i<a.length;i+=s) out.push(a.slice(i,i+s));return out;}
    function heartCard(n){return `<div class="p-4 rounded-2xl bg-gray-900/50 shadow-sm border border-gray-700"><div class="flex items-center gap-2"><span class="text-xl">‚ù§Ô∏è</span><div class="text-sm text-gray-200">${n||'Anon'}</div></div></div>`;}
    function renderHeartsSlides(arr){
      const pages=chunk(arr,18), ul=document.getElementById('heartsSlides');
      ul.innerHTML=pages.map(p=>`<li class="splide__slide"><div class="grid md:grid-cols-3 gap-3">${p.map(x=>heartCard(x.name)).join('')}</div></li>`).join('')
        || `<li class="splide__slide"><div class="text-sm text-gray-300">–ü–æ–∫–∞ –Ω–µ—Ç —Å–µ—Ä–¥–µ—Ü.</div></li>`;
      if(splide) splide.destroy(true);
      splide=new Splide('#heartsSplide',{type:'slide',perPage:1,perMove:1,pagination:true,arrows:true,classes:{pagination:'splide__pagination mt-4'}}); splide.mount();
    }
    async function fetchHearts(){ const r=await fetch('/.netlify/functions/hearts',{cache:'no-store'}); const d=await r.json(); return Array.isArray(d)?d:[]; }
    async function renderHearts(){ renderHeartsSlides(await fetchHearts()); }
    document.getElementById('addHeart').addEventListener('click', async ()=>{
      const inp=document.getElementById('heartName'); const name=(inp.value||'').trim();
      await fetch('/.netlify/functions/hearts',{method:'POST',headers:{'content-type':'application/json'},body:JSON.stringify({name})});
      inp.value=''; renderHearts();
    });
    renderHearts();

    /* ====== –ú–∏–Ω–∏-–ø–ª–µ–µ—Ä –∞—É–¥–∏–æ-–∞–Ω–æ–Ω—Å–∞ ====== */
    const announceAudio=document.getElementById('announceAudio');
    const announceBtn=document.getElementById('announceBtn');
    const announceStatus=document.getElementById('announceStatus');
    const announcementByLang={
      EN:"audio/ANNOUNCEMENT-EN.mp3", ES:"audio/ANNOUNCEMENT-ES.mp3", FR:"audio/ANNOUNCEMENT-FR.mp3",
      PT:"audio/ANNOUNCEMENT-PT.mp3", DE:"audio/ANNOUNCEMENT-DE.mp3", IT:"audio/ANNOUNCEMENT-IT.mp3",
      RU:"audio/ANNOUNCEMENT-RU.mp3", CN:"audio/ANNOUNCEMENT-CN.mp3", AR:"audio/ANNOUNCEMENT-AR.mp3"
    };
    function setAnnouncementForLang(l,autoplay=false){
      const src=announcementByLang[l]||announcementByLang.EN;
      if(announceAudio.src.endsWith(src)){ if(autoplay && announceAudio.paused) announceAudio.play().catch(()=>{}); return; }
      announceAudio.pause(); announceAudio.src=src;
      announceStatus.textContent = `–Ø–∑—ã–∫: ${l}`;
      if(autoplay) announceAudio.play().catch(()=>{});
    }
    setAnnouncementForLang(savedLang);
    langSelect.addEventListener('change', e => {
      const l = e.target.value;
      localStorage.setItem('site_lang', l);
      setAudioForLang(l, !audio.paused);
      setAnnouncementForLang(l, !announceAudio.paused);
    });
    announceBtn.addEventListener('click', async ()=>{
      if(announceAudio.paused){
        setAnnouncementForLang(langSelect.value);
        try{ await announceAudio.play(); announceBtn.textContent='‚è∏ –ü–∞—É–∑–∞'; }catch{}
      } else {
        announceAudio.pause(); announceBtn.textContent='‚ñ∂Ô∏é –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏';
      }
    });
    announceAudio.addEventListener('ended',()=>{ announceBtn.textContent='‚ñ∂Ô∏é –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏'; });
  </script>
</body>
</html>
